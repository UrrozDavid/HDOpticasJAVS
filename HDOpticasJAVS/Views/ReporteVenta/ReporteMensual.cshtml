@model List<HDOpticasJAVS.Models.PuntoVenta>
@{
    ViewBag.Title = "Reporte Mensual";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">
    <h2 class="mb-4">Reporte Mensual de Ventas</h2>

    @using (Html.BeginForm("ReporteMensual", "ReporteVenta", FormMethod.Post))
    {
        <div class="row mb-3">
            <div class="col-md-5">
                <label for="fechaInicio">Fecha Inicio:</label>
                <input type="date" class="form-control" name="fechaInicio" required />
            </div>
            <div class="col-md-5">
                <label for="fechaFin">Fecha Fin:</label>
                <input type="date" class="form-control" name="fechaFin" required />
            </div>
            <div class="col-md-2 d-flex align-items-end">
                <button type="submit" class="btn btn-primary w-100">Ver Reporte</button>
            </div>
        </div>
    }

    @if (Model != null && Model.Any())
    {
        <div class="alert alert-info">
            Ventas del <strong>@ViewBag.FechaInicio</strong> al <strong>@ViewBag.FechaFin</strong><br />
            Total de Ventas: ₡@ViewBag.TotalVentas<br />
            Total de Transacciones: @ViewBag.TotalTransacciones
        </div>

        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>ID Venta</th>
                    <th>ID Producto</th>
                    <th>Subtotal</th>
                    <th>IVA</th>
                    <th>Total</th>
                    <th>Fecha</th>
                    <th>Hora</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var v in Model)
                {
                    <tr>
                        <td>@v.Id_Venta</td>
                        <td>@v.Id_Producto</td>
                        <td>₡@v.Subtotal</td>
                        <td>₡@v.IVA</td>
                        <td>₡@v.Total</td>
                        <td>@v.Fecha_Venta.ToShortDateString()</td>
                        <td>@v.Hora_Venta</td>
                    </tr>
                }
            </tbody>
        </table>
        <a href="@Url.Action("ExportarReporteEmpleado", "PuntoVenta")" class="btn btn-success mt-3">Exportar a Excel (CSV)</a>

    }
</div>
