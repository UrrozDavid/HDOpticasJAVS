@model HDOpticasJAVS.Models.PuntoVenta
@{
    ViewBag.Title = "Detalles de Venta";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-5">
    <div class="card shadow-lg" style="background: rgba(0, 0, 0, 0.85); color: #F1E0C6; border-radius: 15px;">
        <div class="card-header text-center" style="background-color: #1A73E8; color: white; border-top-left-radius: 15px; border-top-right-radius: 15px;">
            <h2 class="fw-bold" style="font-family: 'Poppins', sans-serif;">Detalles de Venta #@Model.Id_Venta</h2>
        </div>

        <div class="card-body" style="font-family: 'Roboto', sans-serif;">
            <dl class="row">
                <dt class="col-sm-4">ID Producto</dt>
                <dd class="col-sm-8">@Model.Id_Producto</dd>

                <dt class="col-sm-4">Cédula del Cliente</dt>
                <dd class="col-sm-8">@Model.Cedula_Cliente</dd>

                <dt class="col-sm-4">Cantidad</dt>
                <dd class="col-sm-8">@Model.Cantidad</dd>

                <dt class="col-sm-4">Subtotal</dt>
                <dd class="col-sm-8">₡@Model.Subtotal</dd>

                <dt class="col-sm-4">IVA</dt>
                <dd class="col-sm-8">₡@Model.IVA</dd>

                <dt class="col-sm-4">Total</dt>
                <dd class="col-sm-8">₡@Model.Total</dd>

                <dt class="col-sm-4">Fecha</dt>
                <dd class="col-sm-8">@Model.Fecha_Venta.ToShortDateString()</dd>

                <dt class="col-sm-4">Hora</dt>
                <dd class="col-sm-8">@Model.Hora_Venta</dd>
            </dl>

            <div class="mt-4 text-center">
                @{
                    var aplicadas = ViewBag.NotasCreditoAplicadas as List<int> ?? new List<int>();
                    bool yaAplicada = aplicadas.Contains(Model.Id_Venta);
                }

                @if (!yaAplicada)
                {
                    <a href="@Url.Action("CrearNotaCredito", "PuntoVenta", new { id = Model.Id_Venta })" class="btn btn-warning me-2">Aplicar Nota de Crédito</a>
                }
                else
                {
                    <span class="badge bg-success me-2">Nota de crédito ya aplicada</span>
                }

                <a href="@Url.Action("IndexAdmin", "PuntoVenta")" class="btn btn-outline-light">Volver</a>
            </div>
        </div>
    </div>
</div>
